echo "==== SECCIÓN: BUILTINS Y EXTERNOS ===="
echo hola mundo
ls -l /bin
/bin/pwd
/bin/env

echo
echo "==== SECCIÓN: REDIRECCIONES BÁSICAS ===="
/bin/echo hola > file.txt
echo "-- ls tras crear file.txt --"
ls -l
echo "-- cat file.txt --"
cat -n file.txt

cat < file.txt
/bin/echo otra >> file.txt
echo "-- cat file.txt (tras append) --"
cat -n file.txt

echo
echo "==== SECCIÓN: STDERR y DUPs ===="
cat noexiste 2> err.txt
echo "-- ls para ver err.txt --"
ls -l err.txt
echo "-- cat err.txt --"
cat -n err.txt

ls 1> out.txt 2> err.txt
echo "-- ls de out/err separados --"
ls -l out.txt err.txt

ls &> todo.txt
echo "-- ls de todo.txt --"
ls -l todo.txt
echo "-- head de todo.txt --"
head -n 5 todo.txt

/bin/echo hola >| file.txt
echo "-- cat file.txt (>|) --"
cat -n file.txt

/bin/echo hola >&1
printf "linea_por_stdin_dup0\n" | cat -

echo
echo "==== SECCIÓN: ERRORES CLÁSICOS ===="
/bin                      # EISDIR
./noexistente             # ENOENT
ls > /no_perm             # EACCES probable

echo
echo "==== SECCIÓN: EXPANSIONES ===="
/bin/echo $HOME
/bin/echo "$PATH"
/bin/echo $HOME $PATH

echo
echo "==== SECCIÓN: OPERADORES LÓGICOS y SECUENCIACIÓN ===="
/bin/echo uno && /bin/echo dos
/bin/false || /bin/echo se ejecuta
false && /bin/echo no se ejecuta
/bin/echo uno; /bin/echo dos

echo
echo "==== SECCIÓN: SUBSHELLS (si no soporta, ver diffs) ===="
(/bin/echo subshell)
(/bin/echo uno && /bin/echo dos)
/bin/echo hola > out_logic.txt && cat < out_logic.txt
/bin/echo err > /tmp/test 2>> /tmp/test
echo "-- tail /tmp/test --"
tail -n 5 /tmp/test
(/bin/echo hola > hola.txt; cat hola.txt)
echo "-- ls hola.txt && cat --"
ls -l hola.txt
cat -n hola.txt

echo
echo "==== SECCIÓN: COMILLADO y ESCAPES ===="
""                         # Vacío válido
/bin/echo ""
/bin/echo exportando; /usr/bin/env | /usr/bin/grep TEST
'/bin/echo hola'
/bin/echo hola\ mundo
echo uno\ dos\ tres
echo signo\? interrogacion
echo barra\|vertical
echo barra\\invertida
/bin/echo comilla\'simple
/bin/echo comilla\"doble
/bin/echo "comilla\"doble"
/bin/echo 'comilla\'simple'
/bin/echo expansion\$USER
"/bin/echo hola"
ls -z

echo
echo "==== SECCIÓN: PIPES y REDIRECCIONES COMBINADAS ===="
/bin/echo uno | tr a-z A-Z > upper.txt
echo "-- cat upper.txt --"
cat -n upper.txt

cat < upper.txt | grep UNO >> grep_result.txt
echo "-- cat grep_result.txt --"
cat -n grep_result.txt

(/bin/echo uno && /bin/echo dos) | grep uno > pipe_output.txt
echo "-- cat pipe_output.txt --"
cat -n pipe_output.txt

(/bin/echo uno; /bin/echo dos) && /bin/echo tres || /bin/echo cuatro
/bin/echo uno; /bin/echo dos | grep dos

echo
echo "==== SECCIÓN: HEREDOC BÁSICO ===="
cat << EOF
linea 1
linea 2
EOF

/bin/echo heredoc >> prueba.txt << EOF
esto
es
una
prueba
EOF
echo "-- ls y cat de prueba.txt --"
ls -l prueba.txt
cat -n prueba.txt

echo
echo "==== SECCIÓN: HEREDOC SIN EXPANSIÓN ===="
cat << 'EOF'
$HOME no debe expandirse
EOF

echo
echo "==== SECCIÓN: CÓDIGO DE SALIDA ($?) ===="
/bin/echo $?
false
/bin/echo "status false -> $?"
true
/bin/echo "status true -> $?"

echo
echo "==== SECCIÓN: BACKGROUND (&) ===="
/bin/echo fondo &
ls > out_bg.txt 2>&1 &
(/bin/echo uno > uno.txt) & /bin/echo dos >> dos.txt
sleep 1 &
/bin/echo terminado
(/bin/echo uno && sleep 1) &
sleep 2
echo "-- ls de uno.txt y dos.txt --"
ls -l uno.txt dos.txt
echo "-- cat uno.txt; cat dos.txt --"
cat -n uno.txt 2>/dev/null || true
cat -n dos.txt 2>/dev/null || true

echo
echo "==== SECCIÓN: PIPES EN BACKGROUND ===="
/bin/echo inicio && cat << EOF | grep hola > resultado.txt
hola mundo
chao
EOF
/bin/echo uno > uno.txt & /bin/echo dos >> dos.txt
/bin/echo uno | /bin/echo dos > file.txt &
sleep 1
echo "-- ls y cat de resultado/uno/dos/file --"
ls -l resultado.txt uno.txt dos.txt file.txt 2>/dev/null || true
cat -n resultado.txt 2>/dev/null || true
cat -n file.txt 2>/dev/null || true

echo
echo "==== SECCIÓN: CASOS DE EXPANSIÓN ADYACENTE ===="
echo $a""a
echo $a"" a
echo $""
echo $2""
echo $variablequenoexiste""
echo $USER""
echo '$USER'""
echo 1 $2 $3"" $4"" 5 $seis $siete"" 8
echo 1 $USER"" $USER"" $USER"" 4
echo 1 $2"" $3"" $4"" $5"" 6
echo "$USER''z"
echo "$USER""z"
echo "$USER''"
echo 1 $2 $3 $4 $5 6
echo 1 $2 $3"" $4 $5"" 6
echo a'bc'd
echo 'foo'bar'

echo
echo "==== FIN DE LA BATERÍA ===="
